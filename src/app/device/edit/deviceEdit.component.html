<modal-dialog [openModalDialog]="openModalDialog" (evtClose)="onDialogClose($event);"></modal-dialog>
<div class="skin-blue sidebar-mini" [class.sidebar-collapse]="header['collspse']" [class.sidebar-open]="header['collspse']">
  <div id="wrapper" class="wrapper" style="height:100vh;overflow:auto;">
    <layout-header [header]="header"></layout-header>

    <div class="content-wrapper" *ngIf="device">
      <section class="content">
        <div class="box box-primary">
          <div class="row title">
            <div class="col-md-12">
              <h4>{{ 'device' | translate }}</h4>
            </div>
          </div>

          <div class="row row-content break-all">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['sn'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['sn'] }}
                </div>
              </div>            
            </div>            
            <div class="col-xs-2 col-md-1">
              <!-- <img src="assets/img/ic_right_arrow.png"> -->
            </div>            
          </div>

          <div class="row row-content break-all">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['mo'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['mo'] | translate }}
                </div>
              </div>            
            </div>            
            <div class="col-xs-2 col-md-1">
              <!-- <img src="assets/img/ic_right_arrow.png"> -->
            </div>            
          </div>

          <div class="row row-content break-all" *ngIf="device['fwVer'] > 31">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['fwVer'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['fwVer'] }}
                </div>
              </div>            
            </div> 
            <div class="col-xs-2 col-md-1">
              <!-- <img src="assets/img/ic_right_arrow.png"> -->
            </div>          
          </div>

          <div class="row row-content break-all" *ngIf="device['fwVer'] > 31 && device['fwVerNew'] !== device['fwVer']" (click)="openModalFwUpg('kt-6351x');">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ 'device_fw_upgrade' | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ 'lastest_version' | translate }}: {{ device['fwVerNew'] }}
                </div>
              </div>            
            </div> 
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>

          <div class="row row-content break-all" *ngIf="userAdmin === '2'" (click)="openModalFwUpg('kt-stm32');">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ 'stm32_upgrade' | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ 'stm32_upgrade_hint' | translate }}
                </div>
              </div>            
            </div> 
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>          

          <div class="row row-content break-all" *ngIf="userAdmin === '2'" (click)="openModalEdit('pollTime')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['pollTime'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['pollTime'] }}
                </div>
              </div>            
            </div>             
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>          

          <div class="row row-content break-all" (click)="openModalEdit('name')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['name'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['name'] }}
                </div>
              </div>            
            </div>              
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>          

          <div class="row row-content break-all" (click)="openModalEdit('mbusTimeout')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['mbusTimeout'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['mbusTimeout'] }}
                </div>
              </div>            
            </div>             
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>   

          <div class="row row-content break-all" (click)="openModalDevRboot();">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ 'reboot' | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ 'reboot_hinet' | translate }}
                </div>
              </div>            
            </div>              
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>  
        </div>

        <div class="box box-primary">
          <div class="row title">
            <div class="col-md-12">
              <h4>{{ 'logging' | translate }}</h4>
            </div>
          </div>

          <div class="row row-content break-all" (click)="sendEdit('enServLog')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-xs-10 col-md-3">
                  <strong>{{ devConfigs['enServLog'].str | translate }}</strong>
                </div> 
                <div class="hidden-xs hidden-sm col-md-9">
                  <input type="checkbox" [(ngModel)]="device['enServLog']" name="enServLog" [checked]="device['enServLog'] === 1">
                </div>
              </div>            
            </div>           
            <div class="col-xs-2 hidden-md hidden-lg">
              <input type="checkbox" [(ngModel)]="device['enServLog']" name="enServLog" [checked]="device['enServLog'] === 1">              
            </div>            
          </div>  

          <div class="row row-content break-all" (click)="sendEdit('enLog')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-xs-10 col-md-3">
                  <strong>{{ devConfigs['enLog'].str | translate }}</strong>
                </div> 
                <div class="hidden-xs hidden-sm col-md-9">
                  <input type="checkbox" [(ngModel)]="device['enLog']" name="enServLog" [checked]="device['enLog'] === 1">
                </div>
              </div>            
            </div>           
            <div class="col-xs-2 hidden-md hidden-lg">
              <input type="checkbox" [(ngModel)]="device['enLog']" name="enServLog" [checked]="device['enLog'] === 1">          
            </div>            
          </div>  
          
          <div class="row row-content break-all" (click)="openModalEdit('logFreq')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['logFreq'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['logFreq'] }}                
                </div>
              </div>            
            </div>              
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>          

          <div class="row row-content break-all" (click)="openModalEdit('storCapacity')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['storCapacity'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['storCapacity'] }}     
                </div>
              </div>            
            </div>              
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>             

          <div class="row row-content break-all" (click)="openModalEditPswd('ftpPswd')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['ftpPswd'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['ftpPswd'] ? '*********' : '' }}
                </div>
              </div>            
            </div>             
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>             
        </div>

        <div class="box box-primary">
          <div class="row title">
            <div class="col-md-12">
              <h4>{{ 'ftp_client' | translate }}</h4>
            </div>
          </div>        

          <div class="row row-content break-all" (click)="sendEdit('enFtpCli')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-xs-10 col-md-3">
                  <strong>{{ devConfigs['enFtpCli'].str | translate }}</strong>
                </div> 
                <div class="hidden-xs hidden-sm col-md-9">
                  <input type="checkbox" [(ngModel)]="device['enFtpCli']" name="enServLog" [checked]="device['enFtpCli']">
                </div>
              </div>            
            </div>           
            <div class="col-xs-2 hidden-md hidden-lg">
              <input type="checkbox" [(ngModel)]="device['enFtpCli']" name="enServLog" [checked]="device['enFtpCli']"> 
            </div>            
          </div>  

          <div class="row row-content break-all" (click)="openModalEdit('ftpCliHost')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['ftpCliHost'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['ftpCliHost'] }}
                </div>
              </div>            
            </div>               
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div> 

          <div class="row row-content break-all" (click)="openModalEdit('ftpCliAccount')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['ftpCliAccount'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['ftpCliAccount'] }}
                </div>
              </div>            
            </div>              
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div> 

          <div class="row row-content break-all" (click)="openModalEditPswd('ftpCliPswd')">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ devConfigs['ftpCliPswd'].str | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ device['ftpCliPswd'] ? '*********' : '' }}
                </div>
              </div>            
            </div>             
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div> 

          <div class="row row-content break-all" (click)="sendLogCheck();">
            <div class="col-xs-10 col-md-11">
              <div class="row break-all">
                <div class="col-md-3">
                  <strong>{{ 'ftp_cli_send_log' | translate }}</strong>
                </div> 
                <div class="col-md-9">
                  {{ 'ftp_cli_send_log_hint' | translate }}
                </div>
              </div>            
            </div>              
            <div class="col-xs-2 col-md-1">
              <img src="assets/img/ic_right_arrow.png">
            </div>            
          </div>                     
        </div>        
      </section>

      <!-- Edit 視窗 -->
      <modal #modalEdit name="modalEdit" cssClass="modal_with" [animation]="false">
        <div class="box box-primary box-solid" *ngIf="curKey">
          <div class="box-header with-border">
            <h3 class="box-title">
              <span>{{ 'edit' | translate }} - {{ devConfigs[curKey].str | translate }}</span>
            </h3>
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" (click)="modalEdit.close();">
                <i class="fa fa-times"></i>
              </button>
            </div>
          </div>
          <div class="box-body">
            <div class="form-group has-feedback">
              <input type="text" name="editKey" [(ngModel)]="devConfigs[curKey].val" class="form-control" autocomplete="off" maxlength="32" [placeholder]="devConfigs[curKey].hint">
              <span class="glyphicon glyphicon-pencil form-control-feedback"></span>
              <label class="text-danger" *ngIf="devConfigs[curKey].err">
                <span class="glyphicon glyphicon-alert"></span>
                <span>{{ devConfigs[curKey].err | translate }} 
                  <span *ngIf="devConfigs[curKey].errRange">({{ 'allow_range' | translate}}: {{ devConfigs[curKey].errRange }})</span>
                </span>
              </label>                
            </div>             
            <div class="ksmt-modal-footer">
              <button type="button" class="btn btn-default" (click)="modalEdit.close()">
                {{ 'cancel' | translate }}
              </button> 
              <button type="button" class="btn btn-primary" (click)="saveConfigs()">
                {{ 'confirm' | translate }}
              </button> 
            </div>
          </div>
        </div>
      </modal>

      <modal #modalEditPswd name="modalEditPswd" cssClass="modal_with" [animation]="false">
        <div class="box box-primary box-solid" *ngIf="curKey">
          <div class="box-header with-border">
            <h3 class="box-title">
              <span>{{ 'edit' | translate }} - {{ devConfigs[curKey].str | translate }}</span>
            </h3>
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" (click)="modalEditPswd.close();">
                <i class="fa fa-times"></i>
              </button>
            </div>
          </div>
          <div class="box-body">              
            <div class="form-group has-feedback">
              <label>{{ 'new_password' | translate }}</label>
              <input type="password" name="editpassword" [(ngModel)]="devConfigs['password'].val" class="form-control" maxlength="32" autocomplete="off">
              <span class="glyphicon glyphicon-lock form-control-feedback"></span>
              <div class="text-danger" *ngIf="devConfigs['password'].err">
                <span class="glyphicon glyphicon-alert"></span>
                <span>{{ devConfigs['password'].err | translate }}</span>
              </div>                  
            </div>
            <div class="form-group has-feedback">
              <label>{{ 'confirm_password' | translate }}</label>
              <input type="password" name="editconfirm" [(ngModel)]="devConfigs['confirm'].val" class="form-control" maxlength="32" autocomplete="off">
              <span class="glyphicon glyphicon-lock form-control-feedback"></span>
              <div class="text-danger" *ngIf="devConfigs['confirm'].err">
                <span class="glyphicon glyphicon-alert"></span>
                <span>{{ devConfigs['confirm'].err | translate }}</span>
              </div>                  
            </div>
            <div class="ksmt-modal-footer">
              <button type="button" class="btn btn-default" (click)="modalEditPswd.close()">
                {{ 'cancel' | translate }}
              </button> 
              <button type="button" class="btn btn-primary" (click)="sendEditPswd()">
                {{ 'confirm' | translate }}
              </button> 
            </div>
          </div>
        </div>
      </modal>

    </div>
  </div>
</div>